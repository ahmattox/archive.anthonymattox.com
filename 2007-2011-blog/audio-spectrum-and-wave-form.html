

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Audio Spectrum and Wave Form || Anthony Mattox - Interaction Design & Digital Art</title>
	<link type="text/css" rel="stylesheet" href="wp-content/themes/p10/style.css" />
	
	<!-- feeds -->
    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="feed" />
    <link rel="alternate" type="text/xml" title="RSS .92" href="feed/rss" />
    <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="feed/atom" />
    <link rel="pingback" href="xmlrpc.php" />
	<link rel="icon" type="image/png" href="wp-content/themes/p10/favicon.png" />
	
		<!-- post specific styles -->
		<style>
		body{
			background:;
		}
	</style>
			<!-- / styles -->
	
			
<!-- processing embed scripts -->
<script src="wp-content/plugins/wordpress-processing-embed/data/pe_deployJava.js"></script>

				
	<script type="text/javascript">//<![CDATA[
	// Google Analytics for WordPress by Yoast v4.0.12 | http://yoast.com/wordpress/google-analytics/
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount','UA-6086323-1']);
</script><script src="wp-content/plugins/google-analytics-for-wordpress/custom_se_async.js" type="text/javascript"></script>
<script type="text/javascript">	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	//]]></script>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js?ver=2.2'></script>
<script type='text/javascript' src='http://anthonymattox.com/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script>

<script type="text/javascript" charset="utf-8">

	/**
	 * Courtesy of Kimili Flash Embed - Version 2.1.5
	 * by Michael Bester - http://kimili.com
	 */

	(function(){
		try {
			// Disabling SWFObject's Autohide feature
			if (typeof swfobject.switchOffAutoHideShow === "function") {
				swfobject.switchOffAutoHideShow();
			}
		} catch(e) {}
	})();
</script>
<link rel='prev' title='Magnetic Field Clock' href='index.html%3Fp=1210.html' />
<link rel='next' title='Robot Fest' href='index.html%3Fp=1240.html' />
<link rel='canonical' href='index.html%3Fp=1225.html' />
<link rel='shortlink' href='index.html%3Fp=1225.html' />

<!-- All in One SEO Pack 1.6.13.2 by Michael Torbert of Semper Fi Web Design[303,361] -->
<meta name="description" content="This is a quick little audio visualizer I put together with Processing and the ESS Sound Library. The audio spectrum is analyzed with an FFT and" />
<meta name="keywords" content="audio,code,data visualization,ess,processing,sound,spectrum,art" />
<!-- /all in one seo pack -->
<script type="text/javascript" src="wp-content/plugins/audio-player/assets/audio-player.js%3Fver=2.0.4.1"></script>
<script type="text/javascript">AudioPlayer.setup("http://anthonymattox.com/wp-content/plugins/audio-player/assets/player.swf?ver=2.0.4.1", {width:"100%",animation:"no",encode:"yes",initialvolume:"60",remaining:"no",noinfo:"no",buffer:"5",checkpolicy:"no",rtl:"no",bg:"333333",text:"ffffff",leftbg:"333333",lefticon:"a3a3a3",volslider:"ffffff",voltrack:"525252",rightbg:"d9d9d9",rightbghover:"FF2200",righticon:"333333",righticonhover:"FFFFFF",track:"000000",loader:"FF2200",border:"000000",tracker:"666666",skip:"666666",pagebg:"FFFFFF",transparentpagebg:"yes"});</script>
    	<link rel='archives' title='October 2011' href='2011/10.html' />
	<link rel='archives' title='September 2011' href='2011/09.html' />
	<link rel='archives' title='July 2011' href='2011/07.html' />
	<link rel='archives' title='June 2011' href='2011/06.html' />
	<link rel='archives' title='May 2011' href='2011/05.html' />
	<link rel='archives' title='January 2011' href='2011/01.html' />
	<link rel='archives' title='December 2010' href='2010/12.html' />
	<link rel='archives' title='November 2010' href='2010/11.html' />
	<link rel='archives' title='October 2010' href='2010/10.html' />
	<link rel='archives' title='September 2010' href='2010/09.html' />
	<link rel='archives' title='June 2010' href='2010/06.html' />
	<link rel='archives' title='May 2010' href='2010/05.html' />
	<link rel='archives' title='April 2010' href='2010/04.html' />
	<link rel='archives' title='March 2010' href='2010/03.html' />
	<link rel='archives' title='February 2010' href='2010/02.html' />
	<link rel='archives' title='January 2010' href='2010/01.html' />
	<link rel='archives' title='December 2009' href='2009/12.html' />
	<link rel='archives' title='November 2009' href='2009/11.html' />
	<link rel='archives' title='October 2009' href='2009/10.html' />
	<link rel='archives' title='September 2009' href='2009/09.html' />
	<link rel='archives' title='August 2009' href='2009/08.html' />
	<link rel='archives' title='May 2009' href='2009/05.html' />
	<link rel='archives' title='April 2009' href='2009/04.html' />
	<link rel='archives' title='March 2009' href='2009/03.html' />
	<link rel='archives' title='February 2009' href='2009/02/index.html' />
	<link rel='archives' title='January 2009' href='2009/01/index.html' />
	<link rel='archives' title='December 2008' href='2008/12/index.html' />
	<link rel='archives' title='November 2008' href='2008/11/index.html' />
	<link rel='archives' title='October 2008' href='2008/10.html' />
	<link rel='archives' title='June 2008' href='2008/06.html' />
	<link rel='archives' title='August 2007' href='2007/08.html' />
	<link rel='archives' title='June 2007' href='2007/06.html' />
	
	<!-- <script type="text/javascript" language="javascript1.5" src="http://anthonymattox.com/wp-content/themes/p10/scripts/jquery-ui-1.8.5.custom.min.js"></script>-->
	<script type="text/javascript" language="javascript1.5" src="wp-content/themes/p10/scripts/jquery.fancybox-1.3.1.pack.js"></script>
	<script type="text/javascript" language="javascript1.5" src="wp-content/themes/p10/scripts/jquery.ui.effects.js"></script>
	<script type="text/javascript" language="javascript1.5" src="wp-content/themes/p10/scripts/am_p10.js"></script>
</head>
<body>
	<div id="container" class="blog">
		<div id="head">
			<div id="mainhead">
				<h1><a href="index.html">Anthony Mattox <span>Interaction Design + Digital Art</span></a></h1>
				<ul id="nav">
					<li class="page_item page-item-27"><a href="index.html"><span>Home</span></a></li>
<li class="page_item page-item-746"><a href="work/index.html"><span>Work</span></a></li>
<li class="page_item page-item-398 current_page_parent"><a href="blog/index.html"><span>Blog</span></a></li>
<li class="page_item page-item-2"><a href="about.html"><span>About</span></a></li>
				</ul>
			</div>
			
						
					</div><div class="body" id="single">
	<div class="neck">
	</div>
		<div class="post">
		<div class="meta">
		  <div class="metacontent">
  			<h2><a href="index.html%3Fp=1225.html">Audio Spectrum and Wave Form</a></h2>
  			<div>
  				<p class="date">04-21-09</p>
  				<p class="tags">Tagged: <a href="tag/audio.html" rel="tag">audio</a>, <a href="tag/code.html" rel="tag">code</a>, <a href="tag/data-visualization.html" rel="tag">data visualization</a>, <a href="tag/ess.html" rel="tag">ess</a>, <a href="tag/processing/index.html" rel="tag">processing</a>, <a href="tag/sound/index.html" rel="tag">sound</a>, <a href="tag/spectrum.html" rel="tag">spectrum</a><br /></p>
  				  			</div>
  						</div>
		</div>
		<div class="content">
			<p><a href="http://www.anthonymattox.com/wp-content/uploads/2009/04/processing_audio_waveform_spectrum_1.jpg" class="thickbox"><img src="http://www.anthonymattox.com/wp-content/uploads/2009/04/processing_audio_waveform_spectrum_1-450x168.jpg" alt="processing audio waveform &#038; spectrum 1" title="processing audio waveform &#038; spectrum 1" width="450" height="168" class="alignnone size-medium wp-image-1432" /></a></p>
<p><a href="http://www.anthonymattox.com/wp-content/uploads/2009/04/processing_audio_waveform_spectrum_2.jpg" class="thickbox"><img src="http://www.anthonymattox.com/wp-content/uploads/2009/04/processing_audio_waveform_spectrum_2-450x155.jpg" alt="processing audio waveform &#038; spectrum 2" title="processing_audio_waveform_spectrum_2" width="450" height="155" class="alignnone size-medium wp-image-1433" /></a></p>
<p>This is a quick little audio visualizer I put together with <a href="http://www.processing.org" target="_blank">Processing</a> and the <a href="http://www.tree-axis.com/Ess/" target="_blank">ESS Sound Library</a>. The audio spectrum is analyzed with an FFT and spectrum bands are plotted as vertical bars. The Waveform is drawn over the bars in white, adding a lot of interest to the image. To create the fading effect of the object a transparent, white rectangle is drawn over the whole sketch instead of using a background. Previous frames are left on the screen and are slowly covered up by white.</p>
<p>To create an interesting color scheme each bar is colored based on its own height and its neighbors. Combined with the overlapping shapes a broad range of tones and hues is created.</p>
<p><a href="http://www.anthonymattox.com/wp-content/uploads/2009/04/processing_audio_waveform_spectrum_3.jpg" class="thickbox"><img src="http://www.anthonymattox.com/wp-content/uploads/2009/04/processing_audio_waveform_spectrum_3-450x178.jpg" alt="processing audio waveform &#038; spectrum 3" title="processing audio waveform spectrum 3" width="450" height="178" class="alignnone size-medium wp-image-1434" /></a></p>
<p><span id="more-1225"></span></p>
<p>The code isn&#8217;t perfect but I&#8217;ll share it anyway. You can see some more examples and learn more about the library on the <a href="http://www.tree-axis.com/Ess/" target="_blank">ESS home page</a>. Let me know if I can clarify anything.</p>
<div class="code processing">
<h4 class="cHead"><span><a href="http://www.processing.org">processing</a> code<br /><a href="http://www.anthonymattox.com/code_formatter">code formatter</a></span>Audio Spectrum &amp; Waveform Script</h4>
<p><!-- formatted code --></p>
<pre><span Class="KEY">import</span> krister.Ess.*;

FFT fft;
AudioInput input;
<span Class="KEY">int</span> bufferSize=256;

<span Class="KEY">void</span> <span Class="KEY">setup</span>() {
  <span Class="KEY">size</span>(1300,400);
  <span Class="KEY">stroke</span>(0);
  <span Class="KEY">noFill</span>();
  <span Class="KEY">smooth</span>();
  <span Class="KEY">frameRate</span>(30);

  Ess.start(<span Class="KEY">this</span>);
  input=<span Class="KEY">new</span> AudioInput(bufferSize);
  fft=<span Class="KEY">new</span> FFT(bufferSize*2);
  input.start();

  fft.damp(.3);
  fft.equalizer(<span Class="KEY">true</span>);
  fft.limits(.005,.01);

  <span Class="KEY">background</span>(255);
}

<span Class="KEY">void</span> <span Class="KEY">draw</span>() {
  <span Class="KEY">pushStyle</span>();
  <span Class="KEY">noStroke</span>();
  <span Class="KEY">fill</span>(255,50);
  <span Class="KEY">rect</span>(0,0,<span Class="STR">width</span>,<span Class="STR">height</span>);
  <span Class="KEY">popStyle</span>();

  renderSpectrum(50, <span Class="STR">height</span>/2, 5, 400);
}

<span Class="KEY">public</span> <span Class="KEY">void</span> audioInputData(AudioInput input) {
  fft.getSpectrum(input);
}

<span Class="KEY">void</span> renderSpectrum(<span Class="KEY">int</span> X, <span Class="KEY">int</span> Y, <span Class="KEY">int</span> S, <span Class="KEY">int</span> A) {
  <span Class="KEY">pushStyle</span>();
  <span Class="KEY">noStroke</span>();
  <span Class="KEY">for</span> (<span Class="KEY">int</span> i=1; i&lt;(<span Class="STR">width</span>-2*X)/S; i++) {
    <span Class="KEY">float</span> v=fft.spectrum[i];
    <span Class="KEY">fill</span>((v-fft.spectrum[i-1])*200,v*200,(v-fft.spectrum[i+1])*600,30);
    <span Class="KEY">rect</span>((i*S)+X,Y+v*(A/2),3,v*-A);
  }
  <span Class="KEY">popStyle</span>();

  <span Class="KEY">pushStyle</span>();
  <span Class="KEY">stroke</span>(255,200);
  <span Class="KEY">strokeWeight</span>(2);
  <span Class="KEY">noFill</span>();
  <span Class="KEY">int</span> interp=<span Class="KEY">max</span>(0,(((<span Class="KEY">millis</span>()-input.bufferStartTime)/input.duration)*input.<span Class="KEY">size</span>));
  <span Class="KEY">beginShape</span>();
  <span Class="KEY">for</span> (<span Class="KEY">int</span> i=0;i&lt;(<span Class="STR">width</span>-2*X)/S;i++) {
    <span Class="KEY">float</span> pos=Y;
    <span Class="KEY">if</span> (i+interp+1&lt;input.buffer2.length) {
      pos-=input.buffer2[i+interp]*A*2;
    }
    <span Class="KEY">curveVertex</span>(X+i*S,pos);
  }
  <span Class="KEY">endShape</span>();
  <span Class="KEY">popStyle</span>();
}

<span Class="KEY">void</span> <span Class="KEY">keyPressed</span>() {
  <span Class="KEY">if</span> (<span Class="KEY">key</span>==<span Class="STR">'s'</span>) {
    <span Class="KEY">saveFrame</span>(<span Class="STR">&quot;waveform-####.png&quot;</span>);
  }
}</pre>
</div>
		</div>
				<br class="clear" />
	</div>
		
	<div id="comments">
		
			<h3><span>8 comments</span></h3>
		
				
		<ul id="commentlist">
				<li class="post pingback">
		<p>Pingback: <a href='http://somerandomdude.com/stream/tumblr/audio-spectrum-visualization-in-processing-by-anthony-mattox/' rel='external nofollow' class='url'>Some Random Dude</a></p>
	</li>
	<li class="comment even thread-even depth-1">
		<div class="commentmeta">
			<h5><a href="index.html%3Fp=1225.html">noman</a></h5>
			<div class="date">05.05.09</div>
			<div class="reply">
							</div>
		</div>

		<div class="commentbody">
						<p>Tried it out, all I get is a white background, with a few very small gray dots.</p>
		</div>
		<br class="clear" />

	</li>
	<li class="comment byuser comment-author-admin bypostauthor odd alt thread-odd thread-alt depth-1">
		<div class="commentmeta">
			<h5><a href="http://www.anthonymattox.com">tony</a></h5>
			<div class="date">05.05.09</div>
			<div class="reply">
							</div>
		</div>

		<div class="commentbody">
						<p>If your not getting any errors it&#8217;s probably an issue with your audio input. The script checks for the default audio input. My computer has in internal microphone. Check the sound settings in your system preferences and make sure it&#8217;s picking something up and the input volume is turned up.</p>
<p>If your still not getting anything you can try scaling up the signal within processing by increasing the fourth parameter of the renderSpectrum function (currently 400)  within the draw loop. Other than than that it might help to yell at your computer.</p>
		</div>
		<br class="clear" />

	</li>
	<li class="comment even thread-even depth-1">
		<div class="commentmeta">
			<h5><a href="index.html%3Fp=1225.html">noman</a></h5>
			<div class="date">05.05.09</div>
			<div class="reply">
							</div>
		</div>

		<div class="commentbody">
						<p>Thanks. It was my audio input.</p>
<p>For others having a problem with this example:<br />
for the ESS library &#8211; make sure you restart processing after you extracted<br />
for the audio input in windows &#8211; turn on/unmute stereo mix as input, in volume settings.</p>
		</div>
		<br class="clear" />

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1">
		<div class="commentmeta">
			<h5><a href="index.html%3Fp=1225.html">John Seales</a></h5>
			<div class="date">03.20.10</div>
			<div class="reply">
							</div>
		</div>

		<div class="commentbody">
						<p>Hey &#8211; your visualization is beautiful.</p>
<p>I&#8217;m a composer, and sometimes I work on transcribing performances. I&#8217;ve started using a method of scoring to a video of a performance. I can get a really accurate transcription by watching performer&#8217;s fingers. Problem is, I need a video of the performers. </p>
<p>I have an idea though: if I could take a sound file and turn it into a video file, the visual part being a waveform visualization (a clear and basic one) I could make very accurate transcriptions from a sound file. </p>
<p>input: sound file (wav or aiff)<br />
output: video file (mpeg or mp2 or whatever) with original sound file as audio component and waveform visualization as visual component. </p>
<p>Does a tool like that exist, or would it be an easy extension of what you have here?</p>
		</div>
		<br class="clear" />

	</li>
	<li class="comment byuser comment-author-admin bypostauthor even thread-even depth-1">
		<div class="commentmeta">
			<h5><a href="http://www.anthonymattox.com">tony</a></h5>
			<div class="date">03.27.10</div>
			<div class="reply">
							</div>
		</div>

		<div class="commentbody">
						<p>Thanks.</p>
<p>There are definitely some tools like that out there. If you search for spectrum analyzers you should be able to find something. I think there might even be one as a visualizer for itunes. <a href="http://audacity.sourceforge.net/" rel="nofollow">Audacity</a>, an free audio editor has a spectrum view as well.</p>
<p>Most of these applications will display a grid which represents time in one direction and frequency in the other. The pixels will be colored based on the volume of that frequency at each time.</p>
<p>Unfortunately I don&#8217;t think this sort of visualization will be as easy to understand as you would hope. A single note from an instrument will not be seen as a blip and the base frequency but a more complex structure of overtones. If you&#8217;re only looking at one instrument at a time, it might be possible, depending on the instrument, but it would be easy.</p>
		</div>
		<br class="clear" />

	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1">
		<div class="commentmeta">
			<h5><a href="http://myspace.com/pedrotie">Pedro</a></h5>
			<div class="date">10.06.10</div>
			<div class="reply">
							</div>
		</div>

		<div class="commentbody">
						<p>Muito bom .<br />
Very good!<br />
thanks</p>
		</div>
		<br class="clear" />

	</li>
	<li class="comment even thread-even depth-1">
		<div class="commentmeta">
			<h5><a href="http://meeble.com">meeble</a></h5>
			<div class="date">07.24.11</div>
			<div class="reply">
							</div>
		</div>

		<div class="commentbody">
						<p>I think your visualizer looks exactly like what I am looking for &#8211; but I&#8217;m not really sure how to run it.  Do I run it in the &#8220;Processing&#8221; app?  What role does Ess play?  Any specific help you can offer is appreciated&#8230;</p>
		</div>
		<br class="clear" />

	</li>
		</ul>
		
			
	</div>	</div>
    <div id="foot">
      <div id="footcontent">
        <div id="cc">
          <a href="http://creativecommons.org/licenses/by-nc/3.0/"></a>
        </div>
        <div id="links">
          <a href="http://twitter.com/ahmattox" id="foot-twitter">@ahmattox</a>
          <a href="http://friendsoftheweb.com/" id="foot-ftw">Friends of The Web</a>
          <a href="http://madewithloveinbaltimore.org" id="foot-heart">Made with &hearts; in Baltimore</a>
        </div>
        <br class="clear" />
      </div>
    </div>
  </div><!-- / container -->
  </body>
</html>